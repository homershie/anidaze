# AniDazeï¼ˆå‹•ç•«æ™‚æ—¥ï¼‰

AniDaze æ˜¯ä¸€å€‹ä»¥ã€Œå‹•ç•«æ—¥æ›†ã€èˆ‡ã€Œè¿½ç•ªæ¸…å–®ã€ç‚ºæ ¸å¿ƒçš„ Next.js App Router å°ˆæ¡ˆï¼Œç›®æ¨™æ˜¯ç·´ç¿’ä¸¦æ•´åˆç¾ä»£ React / Next ç”Ÿæ…‹ï¼ŒåŒ…æ‹¬ GraphQLã€React Queryã€æ¨¡å¼é©—è­‰ã€åœ‹éš›åŒ–èˆ‡å¿«å–ç­–ç•¥ç­‰å¯¦å‹™ã€‚

---

## å°ˆæ¡ˆè³‡è¨Š

- **é¡å‹**ï¼šNext.js 16.0.1 Side Project
- **èªè¨€èˆ‡æŠ€è¡“æ£§**ï¼šTypeScriptã€Reactã€Next.jsï¼ˆApp Routerï¼‰ã€Tailwind CSSã€GraphQLã€React Queryï¼ˆ@tanstack/react-queryï¼‰ã€Zodã€React Hook Formã€date-fnsã€date-fns-tzã€next-intl
- **ç›®æ¨™**ï¼šå‹•ç•«æ’­æ”¾æ—¥æ›†èˆ‡è¿½ç•ªæ¸…å–®ç¶²é æ‡‰ç”¨

---

## å°ˆæ¡ˆç°¡ä»‹

ä½¿ç”¨è€…å¯ä»¥ç€è¦½å³å°‡æ’­å‡ºçš„å‹•ç•«ã€æŸ¥è©¢ä½œå“è³‡è¨Šã€å»ºç«‹è¿½ç•ªæ¸…å–®ï¼Œä¸¦é€éåœ‹éš›åŒ–ä»‹é¢åˆ‡æ›èªè¨€ã€‚

æœ¬å°ˆæ¡ˆåŒæ™‚ç”¨æ–¼ç†Ÿæ‚‰ SSR / ISR çš„è³‡æ–™å¿«å–ç­–ç•¥ã€GraphQL API ä¸²æ¥ã€ä»¥åŠ Zod æ­é… React Hook Form çš„è¡¨å–®é©—è­‰æ•´åˆã€‚

---

## æ ¸å¿ƒåŠŸèƒ½ï¼ˆCore Featuresï¼‰

- ğŸ“… é€é AniList GraphQL API å–å¾—å‹•ç•«å­£ç•ªèˆ‡æ’­æ”¾æ™‚é–“è¡¨
- ğŸŒ æ”¯æ´å¤šèªç³»ï¼ˆnext-intlï¼‰ï¼šç¹é«”ä¸­æ–‡ã€æ—¥æ–‡ã€è‹±æ–‡
- ğŸ” ä½œå“æœå°‹èˆ‡é¡åˆ¥éæ¿¾
- ğŸ’¾ æ¡ç”¨ ISRï¼ˆIncremental Static Regenerationï¼‰å¿«å–ç­–ç•¥
- ğŸŒ å¤šå¹³å°è³‡æ–™æ•´åˆï¼š
  - **AniList**: å‹•ç•«åŸºæœ¬è³‡è¨Šèˆ‡æ’­æ”¾æ™‚é–“
  - **Bangumi**: æ—¥æ–‡ä½œå“ç°¡ä»‹èˆ‡è©•åˆ†
  - **MyAnimeList (Jikan)**: MAL è©•åˆ†èˆ‡æ’å
  - **TMDB**: ä¸­æ–‡æ¨™é¡Œç¿»è­¯
- ğŸˆ¯ **æ™ºæ…§ç¿»è­¯ç³»çµ±**ï¼š
  - ä½¿ç”¨ DeepL API è‡ªå‹•ç¿»è­¯æ—¥æ–‡ç°¡ä»‹ç‚ºç¹é«”ä¸­æ–‡
  - Vercel KV å¿«å–ç¿»è­¯çµæœï¼Œé™ä½ API ä½¿ç”¨é‡
  - æ¯æœˆ 500,000 å­—å…ƒå…è²»é…é¡ç®¡ç†
  - è¶…é™è‡ªå‹•é™ç´šç‚ºé¡¯ç¤ºåŸæ–‡
- ğŸ“Š å¤šå¹³å°è©•åˆ†é¡¯ç¤ºï¼ˆAniListã€MyAnimeListã€Bangumiï¼‰
- ğŸ“† iCal æ—¥æ›†åŒ¯å‡ºåŠŸèƒ½
- ğŸ§© ä½¿ç”¨ Zod å»ºç«‹ schema é©—è­‰ï¼Œçµåˆ React Hook Form å»ºç«‹äº’å‹•è¡¨å–®
- âš¡ ä½¿ç”¨ @tanstack/react-query ç®¡ç†é ç«¯è³‡æ–™å¿«å–èˆ‡åŒæ­¥
- ğŸ•’ ä»¥ date-fns èˆ‡ date-fns-tz è™•ç†æ™‚å€èˆ‡æ—¥æœŸæ ¼å¼
- ğŸ¨ ä»‹é¢ä½¿ç”¨ Tailwind CSSï¼Œé¢¨æ ¼èµ°ã€Œæ—¥ç³»ä¹¾æ·¨ã€è¦–è¦ºèª¿æ€§

---

## å­¸ç¿’ç›®æ¨™ï¼ˆLearning Goalsï¼‰

- ç†Ÿæ‚‰ Next.js App Router æ¶æ§‹èˆ‡ Server Actions
- ç·´ç¿’ SSR / ISR / CSR å„ç¨®æ¸²æŸ“ç­–ç•¥
- å­¸ç¿’ GraphQL è«‹æ±‚èˆ‡å‹åˆ¥è‡ªå‹•ç”Ÿæˆï¼ˆgraphql-request + codegenï¼‰
- å¯¦ä½œ Type-Safe çš„ API Schema é©—è­‰æµç¨‹ï¼ˆZodï¼‰
- çµåˆ React Query å¯¦ç¾è‡ªå‹•å¿«å–ã€éŒ¯èª¤é‚Šç•Œèˆ‡è³‡æ–™åŒæ­¥

---

## API ç«¯é»ï¼ˆAPI Endpointsï¼‰

### å…¬é–‹ç«¯é»
- `GET /api/airing` - ç²å–æ­£åœ¨æ’­æ”¾çš„å‹•ç•«åˆ—è¡¨
- `GET /api/ics/[titleId]` - ç”Ÿæˆ iCal æ ¼å¼çš„æ’­å‡ºè¡Œäº‹æ›†
- `GET /api/translation-stats` - æŸ¥è©¢ç¿»è­¯ API ä½¿ç”¨çµ±è¨ˆ

### ç®¡ç†ç«¯é»ï¼ˆéœ€è¦èªè­‰ï¼‰
- `POST /api/seasonal-revalidate` - æ¸…é™¤å­£ç¯€æ€§å¿«å–
- `POST /api/translation-stats?action=reset` - é‡ç½®ç¿»è­¯é…é¡
- `POST /api/revalidate?tag=[tag]` - æ¸…é™¤æŒ‡å®šå¿«å–æ¨™ç±¤

### Cron Jobsï¼ˆè‡ªå‹•åŸ·è¡Œï¼‰
- æ¯æœˆ 1 è™Ÿï¼šè‡ªå‹•é‡ç½® DeepL ä½¿ç”¨é‡
- æ¯å­£é¦–æ—¥ï¼ˆ1/1ã€4/1ã€7/1ã€10/1ï¼‰ï¼šæ¸…é™¤æ‰€æœ‰å¿«å–

---

## æœªä¾†å¯èƒ½æ•´åˆï¼ˆPossible Future Integrationsï¼‰

- ä½¿ç”¨ Emotion / Framer Motion å¢åŠ äº’å‹•å‹•ç•«
- æ”¶è—èˆ‡æé†’åŠŸèƒ½ï¼ˆåŠ å…¥ Watchlist / æ¨æ’­æé†’ï¼‰
- æ‰¹æ¬¡ç¿»è­¯èˆ‡å„ªå…ˆç´šç®¡ç†

---

## æŠ€è¡“æ£§ï¼ˆTech Stackï¼‰

### å‰ç«¯æ¡†æ¶
- Next.js 16ï¼ˆApp Routerï¼‰ã€React 19ã€TypeScript
- Tailwind CSS 4
- next-intlï¼ˆåœ‹éš›åŒ–ï¼‰
- next-themesï¼ˆæ·±è‰²æ¨¡å¼ï¼‰

### è³‡æ–™ç®¡ç†
- GraphQLã€graphql-request
- @tanstack/react-queryï¼ˆè³‡æ–™æŠ“å– / å¿«å–ï¼‰
- Zodã€React Hook Formï¼ˆè¡¨å–®èˆ‡é©—è­‰ï¼‰

### API æ•´åˆ
- **AniList GraphQL API**: å‹•ç•«è³‡æ–™ä¸»è¦ä¾†æº
- **Bangumi API**: æ—¥æ–‡ç°¡ä»‹èˆ‡è©•åˆ†
- **Jikan API**: MyAnimeList è³‡æ–™
- **TMDB API**: ä¸­æ–‡æ¨™é¡Œç¿»è­¯
- **DeepL API**: æ—¥æ–‡â†’ç¹é«”ä¸­æ–‡ç¿»è­¯

### å„²å­˜èˆ‡å¿«å–
- **Vercel KV (Redis)**: ç¿»è­¯çµæœå¿«å–èˆ‡æµé‡è¿½è¹¤
- **Next.js ISR**: å¢é‡éœæ…‹å†ç”Ÿæˆ

### å·¥å…·èˆ‡æœå‹™
- date-fnsã€date-fns-tzï¼ˆæ—¥æœŸèˆ‡æ™‚å€ï¼‰
- @vercel/kvï¼ˆRedis å®¢æˆ¶ç«¯ï¼‰
- deepl-nodeï¼ˆDeepL SDKï¼‰
- ï¼ˆé–‹ç™¼ï¼‰@graphql-codegen/cli

---

## é–‹ç™¼æ–¹å¼ï¼ˆGetting Startedï¼‰

å®‰è£ä¾è³´ä¸¦å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨ï¼š

```bash
npm install
npm run dev
# æˆ–ä½¿ç”¨ yarn / pnpm / bun
```

æ‰“é–‹ `http://localhost:3000` ä»¥ç€è¦½æ‡‰ç”¨ã€‚

å¯ä»¥å¾ç·¨è¼¯ `app/page.tsx` é–‹å§‹ï¼Œå„²å­˜å¾Œé é¢æœƒè‡ªå‹•æ›´æ–°ã€‚

### API è¨­å®šï¼ˆAPI Setupï¼‰

éƒ¨åˆ†åŠŸèƒ½éœ€è¦é¡å¤–çš„ API è¨­å®šã€‚è«‹åƒè€ƒä»¥ä¸‹æ–‡ä»¶ï¼š

#### å¿…è¦è¨­å®š
- **Vercel KV**: Redis è³‡æ–™åº«ç”¨æ–¼ç¿»è­¯å¿«å–ï¼ˆ[Vercel Dashboard](https://vercel.com/dashboard) å»ºç«‹ï¼‰

#### å¯é¸è¨­å®šï¼ˆå¢å¼·åŠŸèƒ½ï¼‰
- **DeepL API**: æ—¥æ–‡ç°¡ä»‹è‡ªå‹•ç¿»è­¯ç‚ºç¹é«”ä¸­æ–‡ï¼ˆ[è¨­å®šèªªæ˜](docs/translation-setup.md)ï¼‰
- **Bangumi API**: æ—¥æ–‡ç°¡ä»‹èˆ‡è©•åˆ†è³‡æ–™
- **TMDB API**: ä¸­æ–‡æ¨™é¡Œç¿»è­¯ï¼ˆ[è¨­å®šèªªæ˜](docs/tmdb-setup.md)ï¼‰
- **Jikan API**: MyAnimeList å…ƒè³‡æ–™èˆ‡è©•åˆ†ï¼ˆ[è¨­å®šèªªæ˜](docs/jikan-setup.md)ï¼‰
- **Wikipedia API**: TMDB çš„å‚™æ´ä¾†æºï¼ˆ[ä½¿ç”¨èªªæ˜](docs/wikipedia-setup.md)ï¼‰

è©³è¦‹ `docs/` ç›®éŒ„ä¸­çš„å€‹åˆ¥è¨­å®šæ–‡ä»¶ã€‚

### ç’°å¢ƒè®Šæ•¸è¨­å®š

è¤‡è£½ `.env.example` ç‚º `.env.local`ï¼Œä¸¦è¨­å®šä»¥ä¸‹è®Šæ•¸ï¼š

```bash
# DeepL ç¿»è­¯ APIï¼ˆå¯é¸ï¼‰
DEEPL_API_KEY="your_deepl_api_key"

# Bangumi APIï¼ˆå¯é¸ï¼‰
BANGUMI_ACCESS_TOKEN="your_bangumi_token"

# TMDB APIï¼ˆå¯é¸ï¼‰
TMDB_ACCESS_TOKEN="your_tmdb_token"

# Vercel KVï¼ˆè‡ªå‹•è¨­å®šï¼‰
# åŸ·è¡Œ `vercel env pull .env.local` è‡ªå‹•ä¸‹è¼‰
```

### è‡ªå‹•åŒ–ä»»å‹™ï¼ˆVercel Cron Jobsï¼‰

å°ˆæ¡ˆå·²è¨­å®šä»¥ä¸‹ Vercel Cron Jobsï¼š

1. **æ¯æœˆè‡ªå‹•é‡ç½®ç¿»è­¯é…é¡**
   - æ™‚é–“ï¼šæ¯æœˆ 1 è™Ÿ 00:00 UTC
   - ç«¯é»ï¼š`/api/translation-stats?action=reset`

2. **æ¯å­£æ¸…é™¤å¿«å–**
   - æ™‚é–“ï¼šæ¯å¹´ 1/1ã€4/1ã€7/1ã€10/1 çš„ 00:00 UTC
   - ç«¯é»ï¼š`/api/seasonal-revalidate?force=true`
   - åŠŸèƒ½ï¼šæ¸…é™¤å­£ç¯€å¿«å–å’Œç¿»è­¯å¿«å–

---

## å‚™è¨»ï¼ˆNotesï¼‰

- å°ˆæ¡ˆä»¥ `create-next-app`ï¼ˆTailwind æ¨¡æ¿ï¼‰åˆå§‹åŒ–ï¼Œä¸¦è‡ªå‹•ç”¢ç”Ÿ route typesã€‚
- å·²å®‰è£å¥—ä»¶ï¼š`graphql-request`ã€`graphql`ã€`@graphql-codegen/cli`ï¼ˆdevï¼‰ã€`zod`ã€`react-hook-form`ã€`date-fns`ã€`date-fns-tz`ã€`@tanstack/react-query`ã€`next-intl`ã€‚
